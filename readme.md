## TPS测试工具

可以方便快速测出当前服务器配置情况下，最大TPS和最小耗时。

### 运行程序
```shell script
nohup java -jar tps-main-1.0-SNAPSHOT.jar &
```

### 使用步骤

- 修改 JobImpl 内部 init 和 exec 方法，可以根据自己的情况修改。
- 启动程序
- 调用API，传入 并发起始值、终止值、间隔时间、步数大小。
- 查看日志，获得结果数据。

### 示例

并发从1开始，每分钟增加一个并发，最大增加到29并发。获得tps和耗时的走势。

> 调用命令

```shell script
curl -H "Content-type:application/json" -X POST -d '{"threads_start":1,"threads_to":30,"threads_step":1,"times":60,"modelNames":["minsheng_initial"],"queryNum":1}' http://127.0.0.1:9898
```

> 查看结果
```shell script
tail -f nohup.out
```
```text
线程Id：1438 执行事物次数为：8633
1 个线程，60 秒内总共执行的事物数量：8633
===============================================
TPS: 143；平均每次耗时ms：6
===============================================
线程Id：1441 执行事物次数为：7949
线程Id：1440 执行事物次数为：7948
2 个线程，60 秒内总共执行的事物数量：15897
===============================================
TPS: 264；平均每次耗时ms：7
===============================================
线程Id：1444 执行事物次数为：6742
线程Id：1443 执行事物次数为：6746
线程Id：1445 执行事物次数为：6745
3 个线程，60 秒内总共执行的事物数量：20233
===============================================
TPS: 337；平均每次耗时ms：8
===============================================
线程Id：1448 执行事物次数为：5771
线程Id：1450 执行事物次数为：5764
线程Id：1449 执行事物次数为：5779
线程Id：1447 执行事物次数为：5748
4 个线程，60 秒内总共执行的事物数量：23062
===============================================
TPS: 384；平均每次耗时ms：10
===============================================
```

通过日志，即可分析出程序最大tps和最少的耗时。也可以整理成图表，更易于统计分析。